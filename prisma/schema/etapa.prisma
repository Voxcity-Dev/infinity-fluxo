enum NodeType {
  START
  DIALOG
  END
}

model Etapas {
  id          String        @id @default(uuid()) @db.Uuid
  tenant_id   String        @db.Uuid
  fluxo_id    String        @db.Uuid
  nome        String        @db.VarChar(50)
  tipo        NodeType
  interacoes_id  String?     @db.Uuid
  is_deleted    Boolean       @default(false)
  created_at  DateTime      @default(now()) @db.Timestamp(6)
  updated_at  DateTime      @updatedAt @db.Timestamp(6)

  // Relações
  fluxo       Fluxo         @relation(fields: [fluxo_id], references: [id])
  interacoes  Interacoes? @relation(fields: [interacoes_id], references: [id])
  transacoes  Transacao[]

  @@index([tenant_id, fluxo_id, tipo])
  @@map("etapas")
}
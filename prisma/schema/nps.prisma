model Nps {
    id         String   @id @default(uuid()) @db.Uuid
    tenant_id  String   @db.Uuid
    nome       String   @db.VarChar(50)
    pesquisa   String   @db.Text
    is_deleted Boolean  @default(false)
    created_at DateTime @default(now()) @db.Timestamp(6)
    updated_at DateTime @updatedAt @db.Timestamp(6)

    // Configuração de expiração NPS
    expiracao_habilitada  Boolean @default(false)
    expiracao_horas       Int     @default(24)
    expiracao_mensagem    String? @db.Text
    expiracao_silenciosa  Boolean @default(true)

    // Relação
    respostas NpsResposta[]
    filas NpsFila[]

    @@index([tenant_id])
    @@map("nps")
}

model NpsResposta {
    id         String   @id @default(uuid()) @db.Uuid
    nps_id     String   @db.Uuid
    resposta   Int
    ticket_id String? @db.Text
    created_at DateTime @default(now()) @db.Timestamp(6)
    updated_at DateTime @updatedAt @db.Timestamp(6)

    // Relação
    nps Nps @relation(fields: [nps_id], references: [id])

    @@index([created_at], map: "idx_nps_resposta_created")
    @@index([resposta], map: "idx_nps_resposta_score")
    @@index([nps_id, created_at], map: "idx_nps_resposta_nps_created")
    @@index([ticket_id], map: "idx_nps_resposta_ticket")
    @@map("nps_respostas")
}

model NpsFila {
    id                  String   @id @default(uuid()) @db.Uuid
    tenant_id           String   @db.Uuid
    nps_id              String   @db.Uuid
    fila_atendimento_id String   @db.Uuid
    is_deleted          Boolean  @default(false)
    created_at          DateTime @default(now()) @db.Timestamp(6)
    updated_at          DateTime @updatedAt @db.Timestamp(6)

    // Relação
    nps Nps @relation(fields: [nps_id], references: [id])

    @@index([tenant_id])
    @@index([nps_id])
    @@index([fila_atendimento_id])
    @@index([is_deleted])
    @@map("nps_filas")
}
